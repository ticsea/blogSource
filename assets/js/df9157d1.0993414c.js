"use strict";(self.webpackChunkweb_c=self.webpackChunkweb_c||[]).push([[9830],{8453:(e,n,l)=>{l.d(n,{R:()=>d,x:()=>c});var i=l(6540);const r={},s=i.createContext(r);function d(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(s.Provider,{value:n},e.children)}},9243:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>j,frontMatter:()=>d,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"MinecraftModding/Java/JavaMemoryModel","title":"JavaMemoryModel","description":"Java \u5185\u5b58\u7ba1\u7406\u624b\u518c","source":"@site/docs/MinecraftModding/Java/JavaMemoryModel.md","sourceDirName":"MinecraftModding/Java","slug":"/MinecraftModding/Java/JavaMemoryModel","permalink":"/docs/MinecraftModding/Java/JavaMemoryModel","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Generics","permalink":"/docs/MinecraftModding/Java/Generics"},"next":{"title":"Supplier","permalink":"/docs/MinecraftModding/Java/Supplier"}}');var r=l(4848),s=l(8453);const d={},c=void 0,a={},h=[{value:"Java \u5185\u5b58\u7ba1\u7406\u624b\u518c",id:"java-\u5185\u5b58\u7ba1\u7406\u624b\u518c",level:3},{value:"<strong>Java \u5185\u5b58\u7ba1\u7406</strong>",id:"java-\u5185\u5b58\u7ba1\u7406",level:3},{value:"1. Java \u5185\u5b58\u6a21\u578b\uff08JMM\uff09\u6982\u8ff0",id:"1-java-\u5185\u5b58\u6a21\u578bjmm\u6982\u8ff0",level:2},{value:"2. \u8fd0\u884c\u65f6\u6570\u636e\u533a\uff08Runtime Data Areas\uff09",id:"2-\u8fd0\u884c\u65f6\u6570\u636e\u533aruntime-data-areas",level:2},{value:"(1) \u65b9\u6cd5\u533a\uff08Method Area\uff09",id:"1-\u65b9\u6cd5\u533amethod-area",level:3},{value:"(2) \u5806\uff08Heap\uff09",id:"2-\u5806heap",level:3},{value:"(3) \u865a\u62df\u673a\u6808\uff08VM Stack\uff09",id:"3-\u865a\u62df\u673a\u6808vm-stack",level:3},{value:"(4) \u672c\u5730\u65b9\u6cd5\u6808\uff08Native Method Stack\uff09",id:"4-\u672c\u5730\u65b9\u6cd5\u6808native-method-stack",level:3},{value:"(5) \u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC Register\uff09",id:"5-\u7a0b\u5e8f\u8ba1\u6570\u5668pc-register",level:3},{value:"3. \u5783\u573e\u56de\u6536\uff08Garbage Collection, GC\uff09",id:"3-\u5783\u573e\u56de\u6536garbage-collection-gc",level:2},{value:"(1) \u5bf9\u8c61\u5b58\u6d3b\u5224\u5b9a",id:"1-\u5bf9\u8c61\u5b58\u6d3b\u5224\u5b9a",level:3},{value:"(2) \u5783\u573e\u56de\u6536\u7b97\u6cd5",id:"2-\u5783\u573e\u56de\u6536\u7b97\u6cd5",level:3},{value:"\u7b97\u6cd5           \u539f\u7406                               \u9002\u7528\u573a\u666f        \u4f18\u7f3a\u70b9",id:"\u7b97\u6cd5-----------\u539f\u7406-------------------------------\u9002\u7528\u573a\u666f--------\u4f18\u7f3a\u70b9",level:2},{value:"(3) \u5783\u573e\u6536\u96c6\u5668\uff08HotSpot \u5b9e\u73b0\uff09",id:"3-\u5783\u573e\u6536\u96c6\u5668hotspot-\u5b9e\u73b0",level:3},{value:"\u6536\u96c6\u5668           \u5206\u4ee3   \u7b97\u6cd5           \u7279\u70b9",id:"\u6536\u96c6\u5668-----------\u5206\u4ee3---\u7b97\u6cd5-----------\u7279\u70b9",level:2},{value:"(4) GC \u8c03\u4f18\u53c2\u6570",id:"4-gc-\u8c03\u4f18\u53c2\u6570",level:3},{value:"4. \u5185\u5b58\u95ee\u9898\u8bca\u65ad\u4e0e\u5de5\u5177",id:"4-\u5185\u5b58\u95ee\u9898\u8bca\u65ad\u4e0e\u5de5\u5177",level:2},{value:"(1) \u5e38\u89c1\u5185\u5b58\u95ee\u9898",id:"1-\u5e38\u89c1\u5185\u5b58\u95ee\u9898",level:3},{value:"(2) \u8bca\u65ad\u5de5\u5177",id:"2-\u8bca\u65ad\u5de5\u5177",level:3},{value:"\u5de5\u5177            \u7528\u9014                               \u547d\u4ee4\u7528\u6cd5",id:"\u5de5\u5177------------\u7528\u9014-------------------------------\u547d\u4ee4\u7528\u6cd5",level:2},{value:"5. \u5b9e\u6218\uff1a\u5185\u5b58\u4f18\u5316\u6848\u4f8b",id:"5-\u5b9e\u6218\u5185\u5b58\u4f18\u5316\u6848\u4f8b",level:2},{value:"\u6848\u4f8b 1\uff1a\u7f13\u5b58\u6cc4\u6f0f",id:"\u6848\u4f8b-1\u7f13\u5b58\u6cc4\u6f0f",level:3},{value:"\u6848\u4f8b 2\uff1a\u9891\u7e41 Full GC",id:"\u6848\u4f8b-2\u9891\u7e41-full-gc",level:3},{value:"\u6848\u4f8b 3\uff1a\u7ebf\u7a0b\u6808\u6ea2\u51fa",id:"\u6848\u4f8b-3\u7ebf\u7a0b\u6808\u6ea2\u51fa",level:3},{value:"6. \u603b\u7ed3",id:"6-\u603b\u7ed3",level:2},{value:"\u4e3b\u9898           \u5173\u952e\u70b9",id:"\u4e3b\u9898-----------\u5173\u952e\u70b9",level:2}];function t(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"java-\u5185\u5b58\u7ba1\u7406\u624b\u518c",children:"Java \u5185\u5b58\u7ba1\u7406\u624b\u518c"}),"\n",(0,r.jsx)(n.p,{children:"\u2014\u2014 \u4ece\u8fd0\u884c\u65f6\u7ed3\u6784\u5230\u5783\u573e\u56de\u6536\u6df1\u5ea6\u89e3\u6790"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"java-\u5185\u5b58\u7ba1\u7406",children:(0,r.jsx)(n.strong,{children:"Java \u5185\u5b58\u7ba1\u7406"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u533a\u57df"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u5b58\u50a8\u5185\u5bb9"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u751f\u547d\u5468\u671f"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u7ebf\u7a0b\u5171\u4eab\u6027"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u65b9\u6cd5\u533a\uff08Method Area\uff09"})}),(0,r.jsx)(n.td,{children:"\u7c7b\u4fe1\u606f\u3001\u5e38\u91cf\u3001\u9759\u6001\u53d8\u91cf"}),(0,r.jsx)(n.td,{children:"JVM \u542f\u52a8\u5230\u5173\u95ed"}),(0,r.jsx)(n.td,{children:"\u5171\u4eab"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u5806\uff08Heap\uff09"})}),(0,r.jsx)(n.td,{children:"\u5bf9\u8c61\u5b9e\u4f8b\u3001\u6570\u7ec4"}),(0,r.jsx)(n.td,{children:"\u5bf9\u8c61\u521b\u5efa\u5230\u5783\u573e\u56de\u6536"}),(0,r.jsx)(n.td,{children:"\u5171\u4eab"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u865a\u62df\u673a\u6808\uff08VM Stack\uff09"})}),(0,r.jsx)(n.td,{children:"\u65b9\u6cd5\u8c03\u7528\u7684\u6808\u5e27\uff08\u5c40\u90e8\u53d8\u91cf\u3001\u64cd\u4f5c\u6570\u6808\uff09"}),(0,r.jsx)(n.td,{children:"\u65b9\u6cd5\u8c03\u7528\u5f00\u59cb\u5230\u7ed3\u675f"}),(0,r.jsx)(n.td,{children:"\u7ebf\u7a0b\u79c1\u6709"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u672c\u5730\u65b9\u6cd5\u6808\uff08Native Stack\uff09"})}),(0,r.jsx)(n.td,{children:"JNI\uff08\u672c\u5730\u65b9\u6cd5\uff09\u8c03\u7528"}),(0,r.jsx)(n.td,{children:"\u672c\u5730\u65b9\u6cd5\u6267\u884c\u671f\u95f4"}),(0,r.jsx)(n.td,{children:"\u7ebf\u7a0b\u79c1\u6709"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC Register\uff09"})}),(0,r.jsx)(n.td,{children:"\u5f53\u524d\u7ebf\u7a0b\u6267\u884c\u7684\u5b57\u8282\u7801\u884c\u53f7"}),(0,r.jsx)(n.td,{children:"\u7ebf\u7a0b\u521b\u5efa\u5230\u9500\u6bc1"}),(0,r.jsx)(n.td,{children:"\u7ebf\u7a0b\u79c1\u6709"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"1-java-\u5185\u5b58\u6a21\u578bjmm\u6982\u8ff0",children:"1. Java \u5185\u5b58\u6a21\u578b\uff08JMM\uff09\u6982\u8ff0"}),"\n",(0,r.jsxs)(n.p,{children:["Java \u5185\u5b58\u7ba1\u7406\u7531 JVM\uff08Java Virtual Machine\uff09 \u81ea\u52a8\u5904\u7406\uff0c\u5f00\u53d1\u8005\u65e0\u9700\u624b\u52a8\u5206\u914d\u91ca\u653e\u5185\u5b58\uff0c\u4f46\u4ecd\u9700\u7406\u89e3\u5176\u673a\u5236\u4ee5\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\u6216\u6027\u80fd\u95ee\u9898\u3002",(0,r.jsx)(n.br,{}),"\n","\u6838\u5fc3\u76ee\u6807\uff1a",(0,r.jsx)(n.br,{}),"\n","\u2705 \u9ad8\u6548\u5206\u914d\u5bf9\u8c61\u5185\u5b58",(0,r.jsx)(n.br,{}),"\n","\u2705 \u81ea\u52a8\u56de\u6536\u65e0\u7528\u5bf9\u8c61\uff08GC\uff09",(0,r.jsx)(n.br,{}),"\n","\u2705 \u9694\u79bb\u7ebf\u7a0b\u5b89\u5168\uff08\u6808\u79c1\u6709 vs \u5806\u5171\u4eab\uff09"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-\u8fd0\u884c\u65f6\u6570\u636e\u533aruntime-data-areas",children:"2. \u8fd0\u884c\u65f6\u6570\u636e\u533a\uff08Runtime Data Areas\uff09"}),"\n",(0,r.jsx)(n.p,{children:"JVM \u5185\u5b58\u5212\u5206\u4e3a\u4ee5\u4e0b\u6838\u5fc3\u533a\u57df\uff1a"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u65b9\u6cd5\u533amethod-area",children:"(1) \u65b9\u6cd5\u533a\uff08Method Area\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5b58\u50a8\u5185\u5bb9\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7c7b\u5143\u4fe1\u606f\uff08\u7c7b\u540d\u3001\u7236\u7c7b\u3001\u63a5\u53e3\u3001\u65b9\u6cd5\u4ee3\u7801\u7b49\uff09\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\uff08\u5982 ",(0,r.jsx)(n.code,{children:"String"})," \u5e38\u91cf\u3001",(0,r.jsx)(n.code,{children:"final"})," \u9759\u6001\u53d8\u91cf\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5173\u952e\u70b9\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"JDK 8 \u540e\u7531 \u5143\u7a7a\u95f4\uff08Metaspace\uff09 \u5b9e\u73b0\uff08\u53d6\u4ee3\u6c38\u4e45\u4ee3\uff09\uff0c\u4f7f\u7528\u672c\u5730\u5185\u5b58\uff0c\u9ed8\u8ba4\u65e0\u4e0a\u9650\uff08\u9700\u76d1\u63a7\u9632\u6ea2\u51fa\uff09\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u6ea2\u51fa\u9519\u8bef\uff1a",(0,r.jsx)(n.code,{children:"OutOfMemoryError Metaspace"}),"\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-\u5806heap",children:"(2) \u5806\uff08Heap\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5b58\u50a8\u5185\u5bb9\uff1a\u6240\u6709\u5bf9\u8c61\u5b9e\u4f8b\u548c\u6570\u7ec4\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u5206\u4ee3\u8bbe\u8ba1\uff08\u4f18\u5316 GC \u6548\u7387\uff09\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u65b0\u751f\u4ee3\uff08Young Generation\uff09\uff1a\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u3002","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Eden \u533a\uff1a\u5bf9\u8c61\u9996\u6b21\u5206\u914d\u5904\u3002"}),"\n",(0,r.jsx)(n.li,{children:"Survivor \u533a\uff08S0S1\uff09\uff1aMinor GC \u540e\u5b58\u6d3b\u7684\u5bf9\u8c61\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\u8001\u5e74\u4ee3\uff08Old Generation\uff09\uff1a\u957f\u671f\u5b58\u6d3b\u7684\u5bf9\u8c61\uff08\u7ecf\u8fc7\u591a\u6b21 GC \u540e\u664b\u5347\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u6c38\u4e45\u4ee3\uff08PermGen\uff0cJDK 7 \u53ca\u4e4b\u524d\uff09\uff1a\u5df2\u5e9f\u5f03\uff0c\u88ab\u5143\u7a7a\u95f4\u53d6\u4ee3\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6ea2\u51fa\u9519\u8bef\uff1a",(0,r.jsx)(n.code,{children:"OutOfMemoryError Java heap space"}),"\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-\u865a\u62df\u673a\u6808vm-stack",children:"(3) \u865a\u62df\u673a\u6808\uff08VM Stack\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5b58\u50a8\u5185\u5bb9\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u79c1\u6709\u7684\u6808\u5e27\uff08Stack Frame\uff09\uff0c\u5305\u542b\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5c40\u90e8\u53d8\u91cf\u8868\uff08\u57fa\u672c\u7c7b\u578b\u3001\u5bf9\u8c61\u5f15\u7528\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u64cd\u4f5c\u6570\u6808\uff08\u65b9\u6cd5\u8ba1\u7b97\u65f6\u7684\u4e34\u65f6\u6570\u636e\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u52a8\u6001\u94fe\u63a5\uff08\u6307\u5411\u65b9\u6cd5\u533a\u7684\u65b9\u6cd5\u5f15\u7528\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u65b9\u6cd5\u8fd4\u56de\u5730\u5740\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6808\u6df1\u5ea6\u95ee\u9898\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u9ed8\u8ba4\u6808\u5927\u5c0f 1MB\uff08\u53ef\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"-Xss"})," \u8c03\u6574\uff09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6ea2\u51fa\u9519\u8bef\uff1a",(0,r.jsx)(n.code,{children:"StackOverflowError"}),"\uff08\u5982\u65e0\u9650\u9012\u5f52\uff09\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-\u672c\u5730\u65b9\u6cd5\u6808native-method-stack",children:"(4) \u672c\u5730\u65b9\u6cd5\u6808\uff08Native Method Stack\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4e3a JNI\uff08\u672c\u5730\u65b9\u6cd5\uff0c\u5982 CC++ \u4ee3\u7801\uff09\u670d\u52a1\u7684\u6808\u7a7a\u95f4\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u6ea2\u51fa\u9519\u8bef\uff1a\u540c\u865a\u62df\u673a\u6808\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-\u7a0b\u5e8f\u8ba1\u6570\u5668pc-register",children:"(5) \u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC Register\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bb0\u5f55\u5f53\u524d\u7ebf\u7a0b\u6267\u884c\u7684\u5b57\u8282\u7801\u884c\u53f7\uff08\u7ebf\u7a0b\u79c1\u6709\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u552f\u4e00\u65e0\u6ea2\u51fa\u98ce\u9669\u7684\u533a\u57df\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-\u5783\u573e\u56de\u6536garbage-collection-gc",children:"3. \u5783\u573e\u56de\u6536\uff08Garbage Collection, GC\uff09"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u5bf9\u8c61\u5b58\u6d3b\u5224\u5b9a",children:"(1) \u5bf9\u8c61\u5b58\u6d3b\u5224\u5b9a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5f15\u7528\u8ba1\u6570\u6cd5\uff08\u5df2\u6dd8\u6c70\uff09\uff1a\u5faa\u73af\u5f15\u7528\u65e0\u6cd5\u5904\u7406\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u53ef\u8fbe\u6027\u5206\u6790\uff08\u4e3b\u6d41\uff09\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["GC Roots \u5305\u62ec\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u865a\u62df\u673a\u6808\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u65b9\u6cd5\u533a\u4e2d\u7684\u9759\u6001\u53d8\u91cf\u3002"}),"\n",(0,r.jsx)(n.li,{children:"JNI \u5f15\u7528\u7684\u672c\u5730\u5bf9\u8c61\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\u4ece GC Roots \u51fa\u53d1\uff0c\u4e0d\u53ef\u8fbe\u7684\u5bf9\u8c61\u6807\u8bb0\u4e3a\u5783\u573e\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-\u5783\u573e\u56de\u6536\u7b97\u6cd5",children:"(2) \u5783\u573e\u56de\u6536\u7b97\u6cd5"}),"\n",(0,r.jsx)(n.h2,{id:"\u7b97\u6cd5-----------\u539f\u7406-------------------------------\u9002\u7528\u573a\u666f--------\u4f18\u7f3a\u70b9",children:"\u7b97\u6cd5           \u539f\u7406                               \u9002\u7528\u573a\u666f        \u4f18\u7f3a\u70b9"}),"\n",(0,r.jsxs)(n.p,{children:["\u6807\u8bb0-\u6e05\u9664      \u6807\u8bb0\u5783\u573e \u2192 \u76f4\u63a5\u6e05\u9664                    \u8001\u5e74\u4ee3             \u7b80\u5355\uff0c\u4f46\u4ea7\u751f\u5185\u5b58\u788e\u7247",(0,r.jsx)(n.br,{}),"\n","\u590d\u5236\u7b97\u6cd5       \u5c06\u5b58\u6d3b\u5bf9\u8c61\u590d\u5236\u5230\u53e6\u4e00\u5757\u5185\u5b58             \u65b0\u751f\u4ee3\uff08Eden\u2192S0S1\uff09  \u65e0\u788e\u7247\uff0c\u4f46\u6d6a\u8d39 50% \u7a7a\u95f4",(0,r.jsx)(n.br,{}),"\n","\u6807\u8bb0-\u6574\u7406      \u6807\u8bb0\u5783\u573e \u2192 \u5b58\u6d3b\u5bf9\u8c61\u5411\u4e00\u7aef\u79fb\u52a8 \u2192 \u6e05\u9664   \u8001\u5e74\u4ee3             \u65e0\u788e\u7247\uff0c\u4f46\u79fb\u52a8\u5bf9\u8c61\u8017\u65f6",(0,r.jsx)(n.br,{}),"\n","\u5206\u4ee3\u6536\u96c6       \u7ed3\u5408\u4e0a\u8ff0\u7b97\u6cd5\uff0c\u6309\u5bf9\u8c61\u751f\u547d\u5468\u671f\u5206\u4ee3\u5904\u7406   \u6240\u6709\u533a\u57df           \u7efc\u5408\u6027\u80fd\u6700\u4f18\uff08HotSpot \u9ed8\u8ba4\uff09"]}),"\n",(0,r.jsx)(n.h3,{id:"3-\u5783\u573e\u6536\u96c6\u5668hotspot-\u5b9e\u73b0",children:"(3) \u5783\u573e\u6536\u96c6\u5668\uff08HotSpot \u5b9e\u73b0\uff09"}),"\n",(0,r.jsx)(n.h2,{id:"\u6536\u96c6\u5668-----------\u5206\u4ee3---\u7b97\u6cd5-----------\u7279\u70b9",children:"\u6536\u96c6\u5668           \u5206\u4ee3   \u7b97\u6cd5           \u7279\u70b9"}),"\n",(0,r.jsxs)(n.p,{children:["Serial           \u65b0\u751f\u4ee3    \u590d\u5236               \u5355\u7ebf\u7a0b\uff0cSTW\uff08Stop-The-World\uff09",(0,r.jsx)(n.br,{}),"\n","Parallel Scavenge  \u65b0\u751f\u4ee3  \u590d\u5236               \u591a\u7ebf\u7a0b\uff0c\u541e\u5410\u91cf\u4f18\u5148",(0,r.jsx)(n.br,{}),"\n","CMS              \u8001\u5e74\u4ee3    \u6807\u8bb0-\u6e05\u9664          \u5e76\u53d1\u6536\u96c6\uff0c\u4f4e\u5ef6\u8fdf\uff08JDK 14 \u79fb\u9664\uff09",(0,r.jsx)(n.br,{}),"\n","G1               \u5168\u5806      \u5206Region+\u6807\u8bb0-\u6574\u7406 \u5e73\u8861\u541e\u5410\u4e0e\u5ef6\u8fdf\uff08JDK 9+ \u9ed8\u8ba4\uff09",(0,r.jsx)(n.br,{}),"\n","ZGC              \u5168\u5806      \u67d3\u8272\u6307\u9488           \u8d85\u4f4e\u5ef6\u8fdf\uff08JDK 15+ \u751f\u4ea7\u53ef\u7528\uff09"]}),"\n",(0,r.jsx)(n.h3,{id:"4-gc-\u8c03\u4f18\u53c2\u6570",children:"(4) GC \u8c03\u4f18\u53c2\u6570"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5806\u5927\u5c0f\u8bbe\u7f6e\r\n-Xms512m -Xmx1024m      # \u521d\u59cb\u5806 512MB\uff0c\u6700\u5927\u5806 1GB\r\n-XXNewRatio=2          # \u65b0\u751f\u4ee3\u8001\u5e74\u4ee3 = 12\r\n-XXSurvivorRatio=8     # EdenS0S1 = 811\r\n\r\n# \u9009\u62e9\u6536\u96c6\u5668\r\n-XX+UseG1GC            # \u542f\u7528 G1\r\n-XX+UseConcMarkSweepGC # \u542f\u7528 CMS\uff08\u5df2\u5e9f\u5f03\uff09\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-\u5185\u5b58\u95ee\u9898\u8bca\u65ad\u4e0e\u5de5\u5177",children:"4. \u5185\u5b58\u95ee\u9898\u8bca\u65ad\u4e0e\u5de5\u5177"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u5e38\u89c1\u5185\u5b58\u95ee\u9898",children:"(1) \u5e38\u89c1\u5185\u5b58\u95ee\u9898"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5185\u5b58\u6cc4\u6f0f\uff1a\u5bf9\u8c61\u65e0\u7528\u65f6\u4ecd\u88ab\u5f15\u7528\uff08\u5982\u9759\u6001\u96c6\u5408\u672a\u6e05\u7406\uff09\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u5185\u5b58\u6ea2\u51fa\uff1a\u5bf9\u8c61\u8fc7\u591a\u6216\u5806\u8bbe\u7f6e\u8fc7\u5c0f\uff08",(0,r.jsx)(n.code,{children:"OutOfMemoryError"}),"\uff09\u3002"]}),"\n",(0,r.jsx)(n.li,{children:"GC \u8fc7\u9891\uff1a\u65b0\u751f\u4ee3\u592a\u5c0f\u5bfc\u81f4\u9891\u7e41 Minor GC\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-\u8bca\u65ad\u5de5\u5177",children:"(2) \u8bca\u65ad\u5de5\u5177"}),"\n",(0,r.jsx)(n.h2,{id:"\u5de5\u5177------------\u7528\u9014-------------------------------\u547d\u4ee4\u7528\u6cd5",children:"\u5de5\u5177            \u7528\u9014                               \u547d\u4ee4\u7528\u6cd5"}),"\n",(0,r.jsxs)(n.p,{children:["jstat           \u76d1\u63a7 GC \u7edf\u8ba1\u4fe1\u606f                       ",(0,r.jsx)(n.code,{children:"jstat -gcutil pid 1000"}),(0,r.jsx)(n.br,{}),"\n","jmap            \u751f\u6210\u5806\u8f6c\u50a8\u5feb\u7167\uff08Heap Dump\uff09            ",(0,r.jsx)(n.code,{children:"jmap -dumpformat=b,file=heap.hprof pid"}),(0,r.jsx)(n.br,{}),"\n","VisualVM        \u56fe\u5f62\u5316\u5206\u6790\u5185\u5b58\u548c\u7ebf\u7a0b                   \u96c6\u6210\u4e8e JDK\uff0c\u652f\u6301\u63d2\u4ef6\u6269\u5c55",(0,r.jsx)(n.br,{}),"\n","MAT\uff08Eclipse\uff09  \u5206\u6790 Heap Dump \u67e5\u627e\u6cc4\u6f0f\u5bf9\u8c61            \u52a0\u8f7d ",(0,r.jsx)(n.code,{children:".hprof"})," \u6587\u4ef6",(0,r.jsx)(n.br,{}),"\n","Arthas          \u5728\u7ebf\u8bca\u65ad JVM \u95ee\u9898\uff08\u5982\u76d1\u63a7\u65b9\u6cd5\u8c03\u7528\uff09     ",(0,r.jsx)(n.code,{children:"watch com.example.MyClass "})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-\u5b9e\u6218\u5185\u5b58\u4f18\u5316\u6848\u4f8b",children:"5. \u5b9e\u6218\uff1a\u5185\u5b58\u4f18\u5316\u6848\u4f8b"}),"\n",(0,r.jsx)(n.h3,{id:"\u6848\u4f8b-1\u7f13\u5b58\u6cc4\u6f0f",children:"\u6848\u4f8b 1\uff1a\u7f13\u5b58\u6cc4\u6f0f"}),"\n",(0,r.jsxs)(n.p,{children:["\u95ee\u9898\uff1a\u9759\u6001 ",(0,r.jsx)(n.code,{children:"HashMap"})," \u7f13\u5b58\u6570\u636e\u672a\u6e05\u7406\uff0c\u5bfc\u81f4\u8001\u5e74\u4ee3\u5806\u79ef\u3002",(0,r.jsx)(n.br,{}),"\n","\u89e3\u51b3\uff1a\u6539\u7528\u5f31\u5f15\u7528 ",(0,r.jsx)(n.code,{children:"WeakHashMap"})," \u6216\u5b9a\u671f\u6e05\u7406\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u6848\u4f8b-2\u9891\u7e41-full-gc",children:"\u6848\u4f8b 2\uff1a\u9891\u7e41 Full GC"}),"\n",(0,r.jsxs)(n.p,{children:["\u73b0\u8c61\uff1a",(0,r.jsx)(n.code,{children:"System.gc()"})," \u88ab\u6ee5\u7528\u6216\u5143\u7a7a\u95f4\u672a\u9650\u5236\u3002",(0,r.jsx)(n.br,{}),"\n","\u4f18\u5316\uff1a\u7981\u7528\u663e\u5f0f GC\uff08",(0,r.jsx)(n.code,{children:"-XX+DisableExplicitGC"}),"\uff09\u5e76\u9650\u5236\u5143\u7a7a\u95f4\uff08",(0,r.jsx)(n.code,{children:"-XXMaxMetaspaceSize=256m"}),"\uff09\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u6848\u4f8b-3\u7ebf\u7a0b\u6808\u6ea2\u51fa",children:"\u6848\u4f8b 3\uff1a\u7ebf\u7a0b\u6808\u6ea2\u51fa"}),"\n",(0,r.jsxs)(n.p,{children:["\u573a\u666f\uff1a\u9012\u5f52\u8c03\u7528\u672a\u8bbe\u7ec8\u6b62\u6761\u4ef6\u3002",(0,r.jsx)(n.br,{}),"\n","\u4fee\u590d\uff1a\u6539\u4e3a\u5faa\u73af\u6216\u589e\u52a0\u6808\u5927\u5c0f\uff08",(0,r.jsx)(n.code,{children:"-Xss2m"}),"\uff09\u3002"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-\u603b\u7ed3",children:"6. \u603b\u7ed3"}),"\n",(0,r.jsx)(n.h2,{id:"\u4e3b\u9898-----------\u5173\u952e\u70b9",children:"\u4e3b\u9898           \u5173\u952e\u70b9"}),"\n",(0,r.jsxs)(n.p,{children:["\u5185\u5b58\u7ed3\u6784       \u5806\u5b58\u5bf9\u8c61\u3001\u6808\u5b58\u65b9\u6cd5\u8c03\u7528\uff0c\u65b9\u6cd5\u533a\u5b58\u7c7b\u4fe1\u606f\uff0cPC \u5bc4\u5b58\u5668\u8bb0\u5f55\u6267\u884c\u4f4d\u7f6e\u3002",(0,r.jsx)(n.br,{}),"\n","GC \u673a\u5236        \u5206\u4ee3\u6536\u96c6\uff08\u65b0\u751f\u4ee3\u590d\u5236\u7b97\u6cd5\uff0c\u8001\u5e74\u4ee3\u6807\u8bb0-\u6574\u7406\uff09\uff0cG1ZGC \u4e3a\u73b0\u4ee3\u4f4e\u5ef6\u8fdf\u9009\u62e9\u3002",(0,r.jsx)(n.br,{}),"\n","\u95ee\u9898\u6392\u67e5       \u7ed3\u5408 ",(0,r.jsx)(n.code,{children:"jstat"}),"\u3001Heap Dump\u3001MAT \u5b9a\u4f4d\u6cc4\u6f0f\u6216\u6ea2\u51fa\u3002",(0,r.jsx)(n.br,{}),"\n","\u8c03\u4f18\u539f\u5219       \u907f\u514d\u8fc7\u65e9\u4f18\u5316\uff0c\u76d1\u63a7\u540e\u518d\u8c03\u6574\u5806\u5927\u5c0f\u3001\u5206\u4ee3\u6bd4\u4f8b\u548c\u6536\u96c6\u5668\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u9644\u5f55\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/",children:"Java GC Tuning Guide"})}),"\n",(0,r.jsx)(n.li,{children:"\u300a\u6df1\u5165\u7406\u89e3 Java \u865a\u62df\u673a\u300b\u2014\u2014\u5468\u5fd7\u660e"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7\u672c\u624b\u518c\uff0c\u60a8\u53ef\u7cfb\u7edf\u638c\u63e1 Java \u5185\u5b58\u7ba1\u7406\u7684\u6838\u5fc3\u77e5\u8bc6\uff0c\u9ad8\u6548\u5e94\u5bf9\u751f\u4ea7\u73af\u5883\u95ee\u9898\uff01 \ud83d\ude80"})]})}function j(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}}}]);